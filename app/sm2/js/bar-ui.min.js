!function(I){"use strict";var a,E,O,e,t,n,o,l,r,s,L=[];function i(e){return void 0!==l.style[e]?e:null}function u(e){try{l.style[r]=e}catch(e){return}return l.style[r]}function d(e,t){var n,a,e=1===arguments.length?(n=document.documentElement,e):(n=e,t);return a=n&&n.querySelectorAll?n.querySelectorAll(e):a}function m(e,t){return void 0!==e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)}function c(e,t){e&&t&&!m(e,t)&&(e.className=(e.className?e.className+" ":"")+t)}function f(e,t){e&&t&&m(e,t)&&(e.className=e.className.replace(new RegExp("( "+t+")|("+t+")","g"),""))}L.on={},E={stopOtherSounds:!0,excludeClass:"sm2-exclude"},soundManager.setup({html5PollingInterval:50,flashVersion:9}),soundManager.onready(function(){var e,t,n=O.dom.getAll(".sm2-bar-ui");if(n&&n.length)for(e=0,t=n.length;e<t;e++)L.push(new a(n[e]))}),a=function(e){var m,c,n,a,l,r,s,i,o,u;function d(){E.stopOtherSounds&&soundManager.stopAll()}function f(e,t){e&&(u.on&&u.on[e]?u.on[e](u,t):L.on[e]&&L.on[e](u,t))}function p(e,t){var e=Math.floor(e/1e3),n=Math.floor(e/3600),a=Math.floor(e/60)-Math.floor(60*n),e=Math.floor(e-3600*n-60*a);return t?(n?n+":":"")+(n&&a<10?"0"+a:a)+":"+(e<10?"0"+e:e):{min:a,sec:e}}function g(e){var t=e.getElementsByTagName("a");t.length&&(e=t[0]),c.playlistTarget.innerHTML='<ul class="sm2-playlist-bd"><li>'+e.innerHTML.replace(n.loadFailedCharacter,"")+"</li></ul>",c.playlistTarget.getElementsByTagName("li")[0].scrollWidth>c.playlistTarget.offsetWidth&&(c.playlistTarget.innerHTML='<ul class="sm2-playlist-bd"><li><marquee>'+e.innerHTML+"</marquee></li></ul>")}function h(e){return soundManager.createSound({url:e,volume:i,whileplaying:function(){var e=Math.min(100,Math.max(0,this.position/this.durationEstimate*100))+"%",t=Math.min(100,Math.max(0,this.position/this.durationEstimate*100))+"%";this.duration&&(c.progress.style.left=e,c.progressBar.style.width=t,c.time.innerHTML=p(this.position,!0)),f("whileplaying",this)},onbufferchange:function(e){e?O.css.add(c.o,"buffering"):O.css.remove(c.o,"buffering")},onplay:function(){O.css.swap(c.o,"paused","playing"),f("play",this)},onpause:function(){O.css.swap(c.o,"playing","paused"),f("pause",this)},onresume:function(){O.css.swap(c.o,"paused","playing")},whileloading:function(){this.isHTML5||(c.duration.innerHTML=p(this.durationEstimate,!0))},onload:function(e){e?c.duration.innerHTML=p(this.duration,!0):this._iO&&this._iO.onerror&&this._iO.onerror()},onerror:function(){var e,t;a.getItem()&&n.loadFailedCharacter&&(c.playlistTarget.innerHTML=c.playlistTarget.innerHTML.replace("<li>","<li>"+n.loadFailedCharacter+" "),a.data.playlist&&a.data.playlist[a.data.selectedIndex]&&-1===(t=(e=a.data.playlist[a.data.selectedIndex].getElementsByTagName("a")[0]).innerHTML).indexOf(n.loadFailedCharacter)&&(e.innerHTML=n.loadFailedCharacter+" "+t)),f("error",this),navigator.userAgent.match(/mobile/i)?r.next():(a.data.timer&&I.clearTimeout(a.data.timer),a.data.timer=I.setTimeout(r.next,2e3))},onstop:function(){O.css.remove(c.o,"playing")},onfinish:function(){var e,t;O.css.remove(c.o,"playing"),c.progress.style.left="0%",e=a.data.selectedIndex,f("finish",this),(t=a.getNext())&&(a.data.selectedIndex!==e||1===a.data.playlist.length&&a.data.loopMode)?(a.select(t),g(t),d(),this.play({url:a.getURL()})):f("end",this)}})}function v(e){soundManager.canPlayURL(e.href)&&(a.data.timer&&(I.clearTimeout(a.data.timer),a.data.timer=null),(l=l||h(e.href)).stop(),a.select(e.parentNode),g(e.parentNode),c.progress.style.left="0px",c.progressBar.style.width="0px",d(),l.play({url:e.href,position:0}))}function t(){var u;function d(){return u.playlist}function n(e){var t;return null===u.selectedIndex?e:(t=d(),e=void 0!==e?e:u.selectedIndex,t[e=Math.max(0,Math.min(e,t.length))])}function e(){c.playlist?u.playlist=c.playlist.getElementsByTagName("li"):I.console&&console.warn&&console.warn("refreshDOM(): playlist node not found?")}return u={playlist:[],selectedIndex:0,loopMode:!1,timer:null},i=soundManager.defaultOptions.volume,c.playlistTarget=O.dom.get(c.o,".sm2-playlist-target"),c.playlistContainer=O.dom.get(c.o,".sm2-playlist-drawer"),c.playlist=O.dom.get(c.o,".sm2-playlist-bd"),e(),O.css.has(c.o,m.playlistOpen)&&I.setTimeout(function(){r.menu(!0)},1),{data:u,refresh:e,getNext:function(){return null!==u.selectedIndex&&u.selectedIndex++,1<u.playlist.length?u.selectedIndex>=u.playlist.length&&(u.loopMode?u.selectedIndex=0:u.selectedIndex--):u.selectedIndex=null,n()},getPrevious:function(){return u.selectedIndex--,u.selectedIndex<0&&(u.loopMode?u.selectedIndex=u.playlist.length-1:u.selectedIndex++),n()},getItem:n,getURL:function(){var e,t=n();return e=t?t.getElementsByTagName("a")[0].href:e},playItemByOffset:function(e){(e=n(e=e||0))&&v(e.getElementsByTagName("a")[0])},select:function(e){for(var t,n,a,o,l,r=O.dom.getAll(c.playlist,"."+m.selected),s=0,i=r.length;s<i;s++)O.css.remove(r[s],m.selected);e&&(l=O.dom.ancestor("li",e),O.css.add(l,m.selected),n=(t=e.offsetTop)+e.offsetHeight,(a=c.playlistContainer.offsetHeight)+(o=c.playlist.scrollTop)<n?c.playlist.scrollTop=n-a+8:t<o&&(c.playlist.scrollTop=e.offsetTop-8)),n=function(e){var t,n,a=-1,o=d();if(o)for(t=0,n=o.length;t<n;t++)if(o[t]===e){a=t;break}return a}(l),u.selectedIndex=n}}}function y(e){return!(!e||!(e.which&&2===e.which||void 0===e.which&&1!==e.button))}function x(e){e&&(s.volume.x=O.position.getOffX(e),s.volume.y=O.position.getOffY(e),s.volume.width=e.offsetWidth,s.volume.height=e.offsetHeight,s.volume.backgroundSize=parseInt(O.style.get(e,"background-size"),10),I.navigator.userAgent.match(/msie|trident/i)&&(s.volume.backgroundSize=s.volume.backgroundSize/s.volume.width*100))}function T(e){var t,n=e.target||e.srcElement;y(e)||("a"!==n.nodeName.toLowerCase()&&(t=n.getElementsByTagName("a"))&&t.length&&(n=n.getElementsByTagName("a")[0]),O.css.has(n,"sm2-volume-control")&&(x(n),O.events.add(document,"mousemove",r.adjustVolume),O.events.add(document,"touchmove",r.adjustVolume),O.events.add(document,"mouseup",r.releaseVolume),O.events.add(document,"touchend",r.releaseVolume),r.adjustVolume(e)))}function w(e){var t=c.progressTrack,n=O.position.getOffX(t),t=t.offsetWidth,a=O.events.getClientX(e),o=l;return o&&o.duration&&(o.setPosition(o.duration*((a-n)/t)),o._iO&&o._iO.whileplaying&&o._iO.whileplaying.apply(o)),e.preventDefault&&e.preventDefault(),!1}function M(e){return O.events.remove(document,"mousemove",w),O.events.remove(document,"touchmove",w),O.css.remove(c.o,"grabbing"),O.events.remove(document,"mouseup",M),O.events.remove(document,"touchend",M),O.events.preventDefault(e),!1}function N(e){y(e)||(O.css.add(c.o,"grabbing"),O.events.add(document,"mousemove",w),O.events.add(document,"touchmove",w),O.events.add(document,"mouseup",M),O.events.add(document,"touchend",M),w(e))}function b(e){var t,n,a,o=e||I.event,l=o.target||o.srcElement;if(l&&l.nodeName){if("a"!==(t=l.nodeName.toLowerCase())&&l.parentNode){for(;"a"!==(t=(l=l.parentNode).nodeName.toLowerCase())&&l.parentNode;);if(!l)return!1}if("a"===t&&(n=l.href,soundManager.canPlayURL(n)?O.css.has(l,E.excludeClass)||(v(l),a=!0):-1!==(n=l.href.lastIndexOf("#"))&&(n=l.href.substr(n+1))&&r[n]&&(a=!0,r[n](e)),a))return O.events.preventDefault(o)}return!0}return m={disabled:"disabled",selected:"selected",active:"active",legacy:"legacy",noVolume:"no-volume",playlistOpen:"playlist-open"},c={o:null,playlist:null,playlistTarget:null,playlistContainer:null,time:null,player:null,progress:null,progressTrack:null,progressBar:null,duration:null,volume:null},n={loadFailedCharacter:""},s={volume:{x:0,y:0,width:0,height:0,backgroundSize:0}},r={play:function(e){var t;void 0===e||isNaN(e)?((t=e&&e.target?(e.target||e.srcElement).href:t)&&-1===t.indexOf("#")||(t=c.playlist.getElementsByTagName("a")[0].href),(l=l||h(t)).playState||d(),l.togglePause(),l.paused&&a.data.timer&&(I.clearTimeout(a.data.timer),a.data.timer=null)):a.playItemByOffset(e)},pause:function(){l&&l.readyState&&l.pause()},resume:function(){l&&l.readyState&&l.resume()},stop:function(){return r.pause()},next:function(){var e,t;a.data.timer&&(I.clearTimeout(a.data.timer),a.data.timer=null),t=a.data.selectedIndex,(e=a.getNext(!0))&&a.data.selectedIndex!==t&&v(e.getElementsByTagName("a")[0])},prev:function(){var e=a.data.selectedIndex,t=a.getPrevious();t&&a.data.selectedIndex!==e&&v(t.getElementsByTagName("a")[0])},shuffle:function(e){e=e?e.target||e.srcElement:O.dom.get(c.o,".shuffle");e&&!O.css.has(e,m.disabled)&&(O.css.toggle(e.parentNode,m.active),a.data.shuffleMode=!a.data.shuffleMode)},repeat:function(e){e=e?e.target||e.srcElement:O.dom.get(c.o,".repeat");e&&!O.css.has(e,m.disabled)&&(O.css.toggle(e.parentNode,m.active),a.data.loopMode=!a.data.loopMode)},menu:function(e){var t=O.css.has(c.o,m.playlistOpen);!a||a.data.selectedIndex||o||(c.playlist.scrollTop=0,o=!0),"boolean"==typeof e&&e||(t||(c.playlistContainer.style.height="0px"),t=O.css.toggle(c.o,m.playlistOpen)),c.playlistContainer.style.height=(t?c.playlistContainer.scrollHeight:0)+"px"},adjustVolume:function(e){var t,n,a=c.volume;if(void 0===e)return!1;var o=O.events.getClientX(e);return e&&void 0!==o?(t=(100-s.volume.backgroundSize)/2,n=Math.max(0,Math.min(1,(o-s.volume.x)/s.volume.width)),a.style.clip="rect(0px, "+s.volume.width*n+"px, "+s.volume.height+"px, "+s.volume.width*(t/100)+"px)",a=t/100*s.volume.width,n=100*Math.max(0,Math.min(1,(o-s.volume.x-a)/(s.volume.width-2*a))),l&&l.setVolume(n),i=n,O.events.preventDefault(e)):(arguments.length&&I.console&&I.console.warn&&console.warn("Bar UI: call setVolume("+e+") instead of adjustVolume("+e+")."),r.setVolume.apply(this,arguments))},releaseVolume:function(){O.events.remove(document,"mousemove",r.adjustVolume),O.events.remove(document,"touchmove",r.adjustVolume),O.events.remove(document,"mouseup",r.releaseVolume),O.events.remove(document,"touchend",r.releaseVolume)},setVolume:function(e){var t,n,a;void 0===e||isNaN(e)||(c.volume&&(n=c.volume,t=s.volume.backgroundSize,a=(t=s.volume.width*((100-t)/2/100))+(s.volume.width-2*t)*(e/100),n.style.clip="rect(0px, "+a+"px, "+s.volume.height+"px, "+t+"px)"),l&&l.setVolume(e),i=e)}},!e&&I.console&&console.warn&&console.warn("init(): No playerNode element?"),c.o=e,I.navigator.userAgent.match(/msie [678]/i)&&O.css.add(c.o,m.legacy),I.navigator.userAgent.match(/mobile/i)&&O.css.add(c.o,m.noVolume),c.progress=O.dom.get(c.o,".sm2-progress-ball"),c.progressTrack=O.dom.get(c.o,".sm2-progress-track"),c.progressBar=O.dom.get(c.o,".sm2-progress-bar"),c.volume=O.dom.get(c.o,"a.sm2-volume-control"),c.volume&&x(c.volume),c.duration=O.dom.get(c.o,".sm2-inline-duration"),c.time=O.dom.get(c.o,".sm2-inline-time"),a=new t,e=a.getItem(0),a.select(e),e&&g(e),O.events.add(c.o,"mousedown",T),O.events.add(c.o,"touchstart",T),O.events.add(c.o,"click",b),O.events.add(c.progressTrack,"mousedown",N),O.events.add(c.progressTrack,"touchstart",N),u={on:null,actions:r,dom:c,playLink:v,playlistController:a}},O={array:{compare:function(n){return function(e,t){return e[n]<t[n]?-1:e[n]>t[n]?1:0}},shuffle:function(e){for(var t,n,a=e.length-1;0<a;a--)t=Math.floor(Math.random()*(a+1)),n=e[a],e[a]=e[t],e[t]=n;return e}},css:{has:m,add:c,remove:f,swap:function(e,t,n){var a={className:e.className};f(a,t),c(a,n),e.className=a.className},toggle:function(e,t){var n=m(e,t);return(n?f:c)(e,t),!n}},dom:{ancestor:function(e,t,n){if(!t||!e)return t;if(e=e.toUpperCase(),n&&t&&t.nodeName===e)return t;for(;t&&t.nodeName!==e&&t.parentNode;)t=t.parentNode;return t&&t.nodeName===e?t:null},get:function(){var e=d.apply(this,arguments);return e&&e.length?e[e.length-1]:e&&0===e.length?null:e},getAll:d},position:{getOffX:function(e){var t=0;if(e.offsetParent)for(;e.offsetParent;)t+=e.offsetLeft,e=e.offsetParent;else e.x&&(t+=e.x);return t},getOffY:function(e){var t=0;if(e.offsetParent)for(;e.offsetParent;)t+=e.offsetTop,e=e.offsetParent;else e.y&&(t+=e.y);return t}},style:{get:function(e,t){var n;return e.currentStyle?n=e.currentStyle[t]:I.getComputedStyle&&(n=document.defaultView.getComputedStyle(e,null).getPropertyValue(t)),n}},events:{add:function(e,t,n){var a={detach:function(){return s(e,t,n)}};return I.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n),a},preventDefault:function(e){return e.preventDefault?e.preventDefault():(e.returnValue=!1,e.cancelBubble=!0),!1},remove:s=void 0!==I.removeEventListener?function(e,t,n){return e.removeEventListener(t,n,!1)}:function(e,t,n){return e.detachEvent("on"+t,n)},getClientX:function(e){return e&&(e.clientX||e.touches&&e.touches[0]&&e.touches[0].pageX)}},features:(l=document.createElement("div"),t=(e=I.requestAnimationFrame||I.webkitRequestAnimationFrame||I.mozRequestAnimationFrame||I.oRequestAnimationFrame||I.msRequestAnimationFrame||null)?function(){return e.apply(I,arguments)}:null,(t={transform:{ie:i("-ms-transform"),moz:i("MozTransform"),opera:i("OTransform"),webkit:i("webkitTransform"),w3:i("transform"),prop:null},rotate:{has3D:!1,prop:null},getAnimationFrame:t}).transform.prop=t.transform.w3||t.transform.moz||t.transform.webkit||t.transform.ie||t.transform.opera,t.transform.prop&&(r=t.transform.prop,u((o={css_2d:"rotate(0deg)",css_3d:"rotate3d(0,0,0,0deg)"}).css_3d)?(t.rotate.has3D=!0,n="rotate3d"):u(o.css_2d)&&(n="rotate"),t.rotate.prop=n),l=null,t)},I.sm2BarPlayers=L,I.sm2BarPlayerOptions=E,I.SM2BarPlayer=a}(window);