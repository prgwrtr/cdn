<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>SM2 Bar-UI 音频列表生成器</title>
<script> // version updater
// check the version of the address bar,
// if it is missing or different from the current one
// redirect the page to avoid browser caching
(function(ver){h=location.href,V=0,v="v="+ver;
if((r=h.match(/[\?\&](v=[^\&]+)/i))!==null)V=r[1];
if((p=h.indexOf("?"))<0)location.href=h+"?"+v;
else if(V===0)location.href=h.slice(0,p+1)+v+"&"+h.slice(p+1);
else if(V!==v)location.href=h.replace(V,v);})("0.33");
</script>
  <link rel="preconnect" href="https://cdn.jsdelivr.net">
<!--
  <link rel="stylesheet" href="./css/mkmedia.css?v=0.32">
-->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/prgwrtr/cdn/app/css/mkmedia.css?v=0.1.19">
<style>
.shift-down {
  transform:translateY(0.4em);
}
</style>
</head>
<body>

<div id="gen-page">
<div id="heading">
  <h1 id="big-heading"><span class="badge">SM2 Bar-UI</span> 音频列表生成器</h1>

  <p id="lg-descr" class="descr" style="display:none">
    音频列表生成列表
  </p>
</div>

<div class="columns-container">
  <div id="gen-box" class="column">
    <h1 id="little-heading"><span class="badge">SM2 Bar-UI</span> 音频列表生成器</h1>
    <div class="container">

      <div class="inp-group">
        <label for="inp-media-title" class="single-line">列表标题（可选）：</label>
        <textarea id="inp-media-title" rows="3"
          placeholder="【音频列表标题】"
          onchange="writeCode()">【温馨提示：点击下面的标题即可收听音频】</textarea>
      </div>

      <div class="inp-group">
        <label for="inp-style">列表标题样式：</label>
        <select id="inp-style" onchange="writeCode()">
          <option value="simple">简单</option>
          <option value="darkred" selected>深红</option>
          <option value="pink">粉红</option>
          <option value="orange">橘黄</option>
        </select>
      </div>

      <div class="inp-group">
        <label for="inp-list" class="single-line">音频列表：</label>
        <textarea id="inp-list" rows="16"
          placeholder="标题1&#x0A;http://my.web.site/music1.mp3&#x0A;&#x0A;标题2&#x0A;http://my.web.site/music2.mp3"
           onchange="writeCode()">音频标题1
https://i3.vzan.cc/upload/audio/mp3/20200220/249eee1e46cc46a5864131acf136053c.mp3

音频标题2
http://i3.vzan.cc/mp3/20190925/2cc455b03b164f40858eca52a6ef8d9d/v.f1010.mp3

音频标题3（一条非常非常非常非常非常非常长的标题）
https://i3.vzan.cc/upload/audio/mp3/20200707/ef9567fa5176451da2430860217f6a10.mp3</textarea>
      </div>

      <div class="inp-group" style="text-align:center;margin:30px 0px;">
        <button class="big-btn" type="button"
          onclick='writeCode()'>生成</button>
      </div>

      <h3 style="background-color:#7af;color:#fff;padding:0.5em 1.5em;margin:0px;">
        音频列表选项
      </h3>
      <section style="background-color:#eef;padding:20px 1% 40px 1%;margin:0px;">

      <div class="inp-group">
        <label for="inp-font-size">字体大小：
        <input id="inp-font-size" type="range" size="6"
          value="16" min="12" max="28" class="shift-down"
          onchange='writeCode()'>
        <span id="font-size-display"></span> px </label>
      </div>

      <div class="inp-group">
        <label for="inp-3d-bar">
          <input id="inp-3d-bar" type="checkbox" onchange="writeCode()">
          立体感控制栏
        </label>
      </div>

      <div class="inp-group">
        <label for="inp-bar-color">控制栏底色：
        <input id="inp-bar-color" type="color" value="#dd4444"
          onchange="writeCode()">
        <span id="bar-color-display"></span>
        </label>
      </div>

<!--
      <div class="inp-group">
        <label for="inp-volume-btn">
          <input id="inp-volume-btn" type="checkbox" onchange="writeCode()">
          音量按钮
          <img src="./sm2/image/icomoon/entypo-25px-000000/PNG/volume.png"
            alt="volume" class="shift-down" style="height:1.5em">
        </label>
      </div>
-->

      <div class="inp-group">
        <label for="inp-prev-btn">
          <input id="inp-prev-btn" type="checkbox" onchange="writeCode()">
          上一首按钮
          <img src="./sm2/image/icomoon/entypo-25px-000000/PNG/first.png"
            alt="prev" class="shift-down" style="height:1.5em">
        </label>
      </div>

      <div class="inp-group">
        <label for="inp-next-btn">
          <input id="inp-next-btn" type="checkbox" checked onchange="writeCode()">
          下一首按钮
          <img src="./sm2/image/icomoon/entypo-25px-000000/PNG/last.png"
            alt="next" class="shift-down" style="height:1.5em">
        </label>
      </div>

      <div class="inp-group">
        <label for="inp-bg-color">背景颜色：
        <input id="inp-bg-color" type="color" value="#fff5d1"
          onchange="writeCode()">
        <span id="bg-color-display"></span>
        </label>
      </div>

      <div class="inp-group">
        <label for="inp-lianhua">
          <input id="inp-lianhua" type="checkbox" checked onchange="writeCode()">
          列表项图标
          <img src="./sm2/image/lianhua.png" alt="lianhua"
            class="shift-down" style="height:1.5em">
        </label>
      </div>

      <div class="inp-group">
        <label for="inp-trunc-long-title">
          <input id="inp-trunc-long-title" type="checkbox" onchange="writeCode()">
          滑动长标题（仅兼容模式）
        </label>
      </div>
      </section>
    </div> <!-- container -->
  </div> <!-- column -->

  <div class="column">
    <h1>预览</h1>
    <div id="preview-wrapper" class="container">
      <div class="inp-group">
        <label for="inp-env">模拟环境：</label>
        <select id="inp-env" onchange="updatePreview()">
          <option value="forum">标准论坛（已安装插件）</option>
          <option value="none">空（无插件）</option>
        </select>
      </div>

      <div id="preview-box">
        <div style="color:#777;padding:1em;">注：代码预览可能需要一段时间，请稍等；部分效果可能无法在预览中正常显示</div>
        <!-- <div id="preview-canvas"></div> -->
        <iframe id="preview-iframe" scrolling="no" style="width:100%;border:1px dotted #cc8;"></iframe>
      </div>
    </div>

    <div class="container" style="padding-top:5px">
      <label for="code">源代码：</label>
      <textarea id="code" rows="16"
        onchange='onCodeChange()'></textarea>

      <div class="copy-btn-wrapper">
        <button id="copy-code-btn" class="copy-btn" type="button"
          onclick='copyAnimated("code", "copy-code-btn", "code-copied-msg")'
          >复制</button>
        <span id="code-copied-msg" class="copied-msg" style="display:none;">
          已复制代码到剪贴板
        </span>
        <div class="inp-group">
          <label for="inp-pack-code">
            <input id="inp-pack-code" type="checkbox" onchange="writeCode()">
            压缩代码
          </label>
        </div>
        <div class="inp-group">
          <label for="inp-auto-install">
            <input id="inp-auto-install" type="checkbox" checked onchange="writeCode()">
            自动安装插件代码
          </label>
          <div class="inp-note">需要时自动安装播放器脚本代码及相关样式，避免重复的代码。</div>
        </div>
        <div class="inp-group">
          <label for="inp-plugin-version">
            插件加载脚本版本
          </label>
          <select id="inp-plugin-version" onchange="writeCode()">
            <option value="cdn-0.1.4">CDN稳定固定v0.1.4</option>
            <option value="cdn-0.1.16">CDN稳定固定v0.1.16</option>
            <option value="cdn-0.1.19">CDN稳定固定v0.1.19</option>
            <option value="cdn-this" id="inp-plugin-version-this">CDN当前固定</option>
            <option value="cdn-latest">CDN最新</option>
            <option value="web-latest">本地最新</option>
            <option value="cdn-latest-force" selected>CDN强制最新</option>
            <option value="web-latest-force">本地强制最新</option>
            <option value="local">内部测试用</option>
          </select>
          <div class="inp-note">
            插件加载脚本 <code>mbuembed(.min).js</code> 是一段很短的脚本（一般小于10K），会根据论坛设置加载的完整的插件，或如果论坛已经安装插件的话，仅加载一小段样式修改文件。
            前几个<b>固定</b>号的版本比较稳定，但不能自动更新。
            <b>CDN</b>版本比<b>本地</b>版本要快。
            <b>最新</b>或<b>强制最新</b>版本会自动更新这段加载脚本。
            <b>最新</b>版本在手机上仍会因浏览器的缓存而滞后；
            <b>强制最新</b>版本会用时间戳强制刷新浏览器缓存，获取近15分钟内的版本，但可能会多次加载同一个文件。
          </div>
        </div>

      </div>
    </div>
  </div> <!-- right column -->

</div> <!-- columns-container -->
</div> <!-- gen-page -->

<!--
<script src="https://cdn.jsdelivr.net/gh/prgwrtr/cdn/app/js/com1.min.js?v=0.1.20"></script>
<script src="https://cdn.jsdelivr.net/gh/prgwrtr/cdn/app/js/sm2ls.min.js?v=0.1.20"></script>
-->
<script src="./js/com1.js?v=0.30"></script>
<script src="./js/sm2ls.js?v=0.33"></script>

</body>
</html>
